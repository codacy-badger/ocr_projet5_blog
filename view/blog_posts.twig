{% extends 'template_blog.twig' %}

{% block page_title %}
<title>Les articles</title>
{% endblock %}

{% block content %}

            {#  Page Header #}
    <header class="masthead" style="background-image: url('assets/images/home-bg.jpg')">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div class="site-heading">
                        <h1>Mon Blog</h1>
                        <span class="subheading">Pour commenter un article, il faut être inscrit et connecté !</span>
                    </div>
                </div>
            </div>
        </div>
    </header>    
    
    {{ include('error_message.twig') }}

    {#  Main Content #}
    <div class="container">
        {% for post in posts %}
        <div class="row justify-content-center">
            <div class="col-md-12">
                    
                {#  Post preview #}
                <div class="post-preview">
                    <a href="post.html" >
                        <h2 class="post-title"><a href="Article-{{ post.id }}-page1">{{ post.title }}</a></h2>
                        <h6 class="post-subtitle">{{ post.chapo }}</h6>
                    </a>
                    <p class="post-meta">
                        Ecrit par {{ post.pseudo }} <br>
                        Dernière modification le {{ post.last_date_change|date("d/m/Y à H:i") }}
                    </p>
                </div>
                {% if SESSION.rankConnectedUser == 'admin' %}
                <div class="card-footer">
                    <a class="card-link" href="Modifier-Article-{{ post.id }}">Modifier</a>
                    <a class="card-link text-danger" href="Supprimer-Article-{{ post.id }}">Supprimer</a>
                </div>
                {% endif %}
                {#  Divider #}
                <hr class="my-4" />
                {#  Pager #}
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="paging">
        <h3>Pages</h3>
        <p>
            {% for page in 1..paging.totalPages %}
                {% if page == paging.currentPage %}
                    <a>{{page}}</a>
                {% else %}
                    <a href="Articles-Page{{page}}">{{page}}</a>
                {% endif %}
            {% endfor %}
        </p>
    </div>
{% endblock %}

